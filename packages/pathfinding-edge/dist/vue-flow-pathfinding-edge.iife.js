var VueFlowPathfindingEdge=function(X,k,_){"use strict";var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oe={exports:{}};oe.exports,function(e){(function(){var t,n,i,r,a,s,u,h,f,c,b,v,p,w,g;i=Math.floor,c=Math.min,n=function(o,l){return o<l?-1:o>l?1:0},f=function(o,l,d,m,y){var A;if(d==null&&(d=0),y==null&&(y=n),d<0)throw new Error("lo must be non-negative");for(m==null&&(m=o.length);d<m;)A=i((d+m)/2),y(l,o[A])<0?m=A:d=A+1;return[].splice.apply(o,[d,d-d].concat(l)),l},s=function(o,l,d){return d==null&&(d=n),o.push(l),w(o,0,o.length-1,d)},a=function(o,l){var d,m;return l==null&&(l=n),d=o.pop(),o.length?(m=o[0],o[0]=d,g(o,0,l)):m=d,m},h=function(o,l,d){var m;return d==null&&(d=n),m=o[0],o[0]=l,g(o,0,d),m},u=function(o,l,d){var m;return d==null&&(d=n),o.length&&d(o[0],l)<0&&(m=[o[0],l],l=m[0],o[0]=m[1],g(o,0,d)),l},r=function(o,l){var d,m,y,A,M,N;for(l==null&&(l=n),A=function(){N=[];for(var W=0,F=i(o.length/2);0<=F?W<F:W>F;0<=F?W++:W--)N.push(W);return N}.apply(this).reverse(),M=[],m=0,y=A.length;m<y;m++)d=A[m],M.push(g(o,d,l));return M},p=function(o,l,d){var m;if(d==null&&(d=n),m=o.indexOf(l),m!==-1)return w(o,0,m,d),g(o,m,d)},b=function(o,l,d){var m,y,A,M,N;if(d==null&&(d=n),y=o.slice(0,l),!y.length)return y;for(r(y,d),N=o.slice(l),A=0,M=N.length;A<M;A++)m=N[A],u(y,m,d);return y.sort(d).reverse()},v=function(o,l,d){var m,y,A,M,N,W,F,P,L;if(d==null&&(d=n),l*10<=o.length){if(A=o.slice(0,l).sort(d),!A.length)return A;for(y=A[A.length-1],F=o.slice(l),M=0,W=F.length;M<W;M++)m=F[M],d(m,y)<0&&(f(A,m,0,null,d),A.pop(),y=A[A.length-1]);return A}for(r(o,d),L=[],N=0,P=c(l,o.length);0<=P?N<P:N>P;0<=P?++N:--N)L.push(a(o,d));return L},w=function(o,l,d,m){var y,A,M;for(m==null&&(m=n),y=o[d];d>l;){if(M=d-1>>1,A=o[M],m(y,A)<0){o[d]=A,d=M;continue}break}return o[d]=y},g=function(o,l,d){var m,y,A,M,N;for(d==null&&(d=n),y=o.length,N=l,A=o[l],m=2*l+1;m<y;)M=m+1,M<y&&!(d(o[m],o[M])<0)&&(m=M),o[l]=o[m],l=m,m=2*l+1;return o[l]=A,w(o,N,l,d)},t=function(){o.push=s,o.pop=a,o.replace=h,o.pushpop=u,o.heapify=r,o.updateItem=p,o.nlargest=b,o.nsmallest=v;function o(l){this.cmp=l??n,this.nodes=[]}return o.prototype.push=function(l){return s(this.nodes,l,this.cmp)},o.prototype.pop=function(){return a(this.nodes,this.cmp)},o.prototype.peek=function(){return this.nodes[0]},o.prototype.contains=function(l){return this.nodes.indexOf(l)!==-1},o.prototype.replace=function(l){return h(this.nodes,l,this.cmp)},o.prototype.pushpop=function(l){return u(this.nodes,l,this.cmp)},o.prototype.heapify=function(){return r(this.nodes,this.cmp)},o.prototype.updateItem=function(l){return p(this.nodes,l,this.cmp)},o.prototype.clear=function(){return this.nodes=[]},o.prototype.empty=function(){return this.nodes.length===0},o.prototype.size=function(){return this.nodes.length},o.prototype.clone=function(){var l;return l=new o,l.nodes=this.nodes.slice(0),l},o.prototype.toArray=function(){return this.nodes.slice(0)},o.prototype.insert=o.prototype.push,o.prototype.top=o.prototype.peek,o.prototype.front=o.prototype.peek,o.prototype.has=o.prototype.contains,o.prototype.copy=o.prototype.clone,o}(),e!==null&&e.exports?e.exports=t:window.Heap=t}).call(ct)}(oe);var dt=oe.exports,G=dt;function gt(e,t,n){this.x=e,this.y=t,this.walkable=n===void 0?!0:n}var le=gt,pt={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4},D=pt,Fe=le,T=D;function S(e,t,n){var i;typeof e!="object"?i=e:(t=e.length,i=e[0].length,n=e),this.width=i,this.height=t,this.nodes=this._buildNodes(i,t,n)}S.prototype._buildNodes=function(e,t,n){var i,r,a=new Array(t);for(i=0;i<t;++i)for(a[i]=new Array(e),r=0;r<e;++r)a[i][r]=new Fe(r,i);if(n===void 0)return a;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(i=0;i<t;++i)for(r=0;r<e;++r)n[i][r]&&(a[i][r].walkable=!1);return a},S.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},S.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},S.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},S.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},S.prototype.getNeighbors=function(e,t){var n=e.x,i=e.y,r=[],a=!1,s=!1,u=!1,h=!1,f=!1,c=!1,b=!1,v=!1,p=this.nodes;if(this.isWalkableAt(n,i-1)&&(r.push(p[i-1][n]),a=!0),this.isWalkableAt(n+1,i)&&(r.push(p[i][n+1]),u=!0),this.isWalkableAt(n,i+1)&&(r.push(p[i+1][n]),f=!0),this.isWalkableAt(n-1,i)&&(r.push(p[i][n-1]),b=!0),t===T.Never)return r;if(t===T.OnlyWhenNoObstacles)s=b&&a,h=a&&u,c=u&&f,v=f&&b;else if(t===T.IfAtMostOneObstacle)s=b||a,h=a||u,c=u||f,v=f||b;else if(t===T.Always)s=!0,h=!0,c=!0,v=!0;else throw new Error("Incorrect value of diagonalMovement");return s&&this.isWalkableAt(n-1,i-1)&&r.push(p[i-1][n-1]),h&&this.isWalkableAt(n+1,i-1)&&r.push(p[i-1][n+1]),c&&this.isWalkableAt(n+1,i+1)&&r.push(p[i+1][n+1]),v&&this.isWalkableAt(n-1,i+1)&&r.push(p[i+1][n-1]),r},S.prototype.clone=function(){var e,t,n=this.width,i=this.height,r=this.nodes,a=new S(n,i),s=new Array(i);for(e=0;e<i;++e)for(s[e]=new Array(n),t=0;t<n;++t)s[e][t]=new Fe(t,e,r[e][t].walkable);return a.nodes=s,a};var bt=S,$={};function ue(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}$.backtrace=ue;function vt(e,t){var n=ue(e),i=ue(t);return n.concat(i.reverse())}$.biBacktrace=vt;function mt(e){var t,n=0,i,r,a,s;for(t=1;t<e.length;++t)i=e[t-1],r=e[t],a=i[0]-r[0],s=i[1]-r[1],n+=Math.sqrt(a*a+s*s);return n}$.pathLength=mt;function he(e,t,n,i){var r=Math.abs,a=[],s,u,h,f,c,b;for(h=r(n-e),f=r(i-t),s=e<n?1:-1,u=t<i?1:-1,c=h-f;a.push([e,t]),!(e===n&&t===i);)b=2*c,b>-f&&(c=c-f,e=e+s),b<h&&(c=c+h,t=t+u);return a}$.interpolate=he;function At(e){var t=[],n=e.length,i,r,a,s,u,h;if(n<2)return t;for(u=0;u<n-1;++u)for(i=e[u],r=e[u+1],a=he(i[0],i[1],r[0],r[1]),s=a.length,h=0;h<s-1;++h)t.push(a[h]);return t.push(e[n-1]),t}$.expandPath=At;function Mt(e,t){var n=t.length,i=t[0][0],r=t[0][1],a=t[n-1][0],s=t[n-1][1],u,h,f,c,b,v,p,w,g,o,l;for(u=i,h=r,b=[[u,h]],v=2;v<n;++v){for(w=t[v],f=w[0],c=w[1],g=he(u,h,f,c),l=!1,p=1;p<g.length;++p)if(o=g[p],!e.isWalkableAt(o[0],o[1])){l=!0;break}l&&(lastValidCoord=t[v-1],b.push(lastValidCoord),u=lastValidCoord[0],h=lastValidCoord[1])}return b.push([a,s]),b}$.smoothenPath=Mt;function kt(e){if(e.length<3)return e;var t=[],n=e[0][0],i=e[0][1],r=e[1][0],a=e[1][1],s=r-n,u=a-i,h,f,c,b,v,p;for(v=Math.sqrt(s*s+u*u),s/=v,u/=v,t.push([n,i]),p=2;p<e.length;p++)h=r,f=a,c=s,b=u,r=e[p][0],a=e[p][1],s=r-h,u=a-f,v=Math.sqrt(s*s+u*u),s/=v,u/=v,(s!==c||u!==b)&&t.push([h,f]);return t.push([r,a]),t}$.compressPath=kt;var H={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}},yt=G,wt=$,fe=H,V=D;function Pe(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||fe.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=V.OnlyWhenNoObstacles:this.diagonalMovement=V.IfAtMostOneObstacle:this.diagonalMovement=V.Never),this.diagonalMovement===V.Never?this.heuristic=e.heuristic||fe.manhattan:this.heuristic=e.heuristic||fe.octile}Pe.prototype.findPath=function(e,t,n,i,r){var a=new yt(function(A,M){return A.f-M.f}),s=r.getNodeAt(e,t),u=r.getNodeAt(n,i),h=this.heuristic,f=this.diagonalMovement,c=this.weight,b=Math.abs,v=Math.SQRT2,p,w,g,o,l,d,m,y;for(s.g=0,s.f=0,a.push(s),s.opened=!0;!a.empty();){if(p=a.pop(),p.closed=!0,p===u)return wt.backtrace(u);for(w=r.getNeighbors(p,f),o=0,l=w.length;o<l;++o)g=w[o],!g.closed&&(d=g.x,m=g.y,y=p.g+(d-p.x===0||m-p.y===0?1:v),(!g.opened||y<g.g)&&(g.g=y,g.h=g.h||c*h(b(d-n),b(m-i)),g.f=g.g+g.h,g.parent=p,g.opened?a.updateItem(g):(a.push(g),g.opened=!0)))}return[]};var ce=Pe,$e=ce;function z(e){$e.call(this,e);var t=this.heuristic;this.heuristic=function(n,i){return t(n,i)*1e6}}z.prototype=new $e,z.prototype.constructor=z;var Nt=z,Wt=$,de=D;function De(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=de.OnlyWhenNoObstacles:this.diagonalMovement=de.IfAtMostOneObstacle:this.diagonalMovement=de.Never)}De.prototype.findPath=function(e,t,n,i,r){var a=[],s=this.diagonalMovement,u=r.getNodeAt(e,t),h=r.getNodeAt(n,i),f,c,b,v,p;for(a.push(u),u.opened=!0;a.length;){if(b=a.shift(),b.closed=!0,b===h)return Wt.backtrace(h);for(f=r.getNeighbors(b,s),v=0,p=f.length;v<p;++v)c=f[v],!(c.closed||c.opened)&&(a.push(c),c.opened=!0,c.parent=b)}return[]};var Bt=De,Se=ce;function U(e){Se.call(this,e),this.heuristic=function(t,n){return 0}}U.prototype=new Se,U.prototype.constructor=U;var Ft=U,_e=G,Oe=$,ge=H,Q=D;function Ce(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||ge.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=Q.OnlyWhenNoObstacles:this.diagonalMovement=Q.IfAtMostOneObstacle:this.diagonalMovement=Q.Never),this.diagonalMovement===Q.Never?this.heuristic=e.heuristic||ge.manhattan:this.heuristic=e.heuristic||ge.octile}Ce.prototype.findPath=function(e,t,n,i,r){var a=function(F,P){return F.f-P.f},s=new _e(a),u=new _e(a),h=r.getNodeAt(e,t),f=r.getNodeAt(n,i),c=this.heuristic,b=this.diagonalMovement,v=this.weight,p=Math.abs,w=Math.SQRT2,g,o,l,d,m,y,A,M,N=1,W=2;for(h.g=0,h.f=0,s.push(h),h.opened=N,f.g=0,f.f=0,u.push(f),f.opened=W;!s.empty()&&!u.empty();){for(g=s.pop(),g.closed=!0,o=r.getNeighbors(g,b),d=0,m=o.length;d<m;++d)if(l=o[d],!l.closed){if(l.opened===W)return Oe.biBacktrace(g,l);y=l.x,A=l.y,M=g.g+(y-g.x===0||A-g.y===0?1:w),(!l.opened||M<l.g)&&(l.g=M,l.h=l.h||v*c(p(y-n),p(A-i)),l.f=l.g+l.h,l.parent=g,l.opened?s.updateItem(l):(s.push(l),l.opened=N))}for(g=u.pop(),g.closed=!0,o=r.getNeighbors(g,b),d=0,m=o.length;d<m;++d)if(l=o[d],!l.closed){if(l.opened===N)return Oe.biBacktrace(l,g);y=l.x,A=l.y,M=g.g+(y-g.x===0||A-g.y===0?1:w),(!l.opened||M<l.g)&&(l.g=M,l.h=l.h||v*c(p(y-e),p(A-t)),l.f=l.g+l.h,l.parent=g,l.opened?u.updateItem(l):(u.push(l),l.opened=W))}}return[]};var pe=Ce,Ie=pe;function q(e){Ie.call(this,e);var t=this.heuristic;this.heuristic=function(n,i){return t(n,i)*1e6}}q.prototype=new Ie,q.prototype.constructor=q;var Pt=q,Ee=$,be=D;function xe(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=be.OnlyWhenNoObstacles:this.diagonalMovement=be.IfAtMostOneObstacle:this.diagonalMovement=be.Never)}xe.prototype.findPath=function(e,t,n,i,r){var a=r.getNodeAt(e,t),s=r.getNodeAt(n,i),u=[],h=[],f,c,b,v=this.diagonalMovement,p=0,w=1,g,o;for(u.push(a),a.opened=!0,a.by=p,h.push(s),s.opened=!0,s.by=w;u.length&&h.length;){for(b=u.shift(),b.closed=!0,f=r.getNeighbors(b,v),g=0,o=f.length;g<o;++g)if(c=f[g],!c.closed){if(c.opened){if(c.by===w)return Ee.biBacktrace(b,c);continue}u.push(c),c.parent=b,c.opened=!0,c.by=p}for(b=h.shift(),b.closed=!0,f=r.getNeighbors(b,v),g=0,o=f.length;g<o;++g)if(c=f[g],!c.closed){if(c.opened){if(c.by===p)return Ee.biBacktrace(c,b);continue}h.push(c),c.parent=b,c.opened=!0,c.by=w}}return[]};var $t=xe,Re=pe;function Z(e){Re.call(this,e),this.heuristic=function(t,n){return 0}}Z.prototype=new Re,Z.prototype.constructor=Z;var Dt=Z,ve=H,je=le,K=D;function Je(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||ve.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=K.OnlyWhenNoObstacles:this.diagonalMovement=K.IfAtMostOneObstacle:this.diagonalMovement=K.Never),this.diagonalMovement===K.Never?this.heuristic=e.heuristic||ve.manhattan:this.heuristic=e.heuristic||ve.octile}Je.prototype.findPath=function(e,t,n,i,r){var a=new Date().getTime(),s=function(g,o){return this.heuristic(Math.abs(o.x-g.x),Math.abs(o.y-g.y))}.bind(this),u=function(g,o){return g.x===o.x||g.y===o.y?1:Math.SQRT2},h=function(g,o,l,d,m){if(this.timeLimit>0&&new Date().getTime()-a>this.timeLimit*1e3)return 1/0;var y=o+s(g,c)*this.weight;if(y>l)return y;if(g==c)return d[m]=[g.x,g.y],g;var A,M,N,W,F=r.getNeighbors(g,this.diagonalMovement);for(N=0,A=1/0;W=F[N];++N){if(this.trackRecursion&&(W.retainCount=W.retainCount+1||1,W.tested!==!0&&(W.tested=!0)),M=h(W,o+u(g,W),l,d,m+1),M instanceof je)return d[m]=[g.x,g.y],M;this.trackRecursion&&--W.retainCount===0&&(W.tested=!1),M<A&&(A=M)}return A}.bind(this),f=r.getNodeAt(e,t),c=r.getNodeAt(n,i),b=s(f,c),v,p,w;for(v=0;;++v){if(p=[],w=h(f,0,b,p,0),w===1/0)return[];if(w instanceof je)return p;b=w}return[]};var St=Je,_t=G,Le=$,He=H;function me(e){e=e||{},this.heuristic=e.heuristic||He.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}me.prototype.findPath=function(e,t,n,i,r){var a=this.openList=new _t(function(f,c){return f.f-c.f}),s=this.startNode=r.getNodeAt(e,t),u=this.endNode=r.getNodeAt(n,i),h;for(this.grid=r,s.g=0,s.f=0,a.push(s),s.opened=!0;!a.empty();){if(h=a.pop(),h.closed=!0,h===u)return Le.expandPath(Le.backtrace(u));this._identifySuccessors(h)}return[]},me.prototype._identifySuccessors=function(e){var t=this.grid,n=this.heuristic,i=this.openList,r=this.endNode.x,a=this.endNode.y,s,u,h,f,c,b=e.x,v=e.y,p,w,g,o,l,d=Math.abs;for(s=this._findNeighbors(e),f=0,c=s.length;f<c;++f)if(u=s[f],h=this._jump(u[0],u[1],b,v),h){if(p=h[0],w=h[1],l=t.getNodeAt(p,w),l.closed)continue;g=He.octile(d(p-b),d(w-v)),o=e.g+g,(!l.opened||o<l.g)&&(l.g=o,l.h=l.h||n(d(p-r),d(w-a)),l.f=l.g+l.h,l.parent=e,l.opened?i.updateItem(l):(i.push(l),l.opened=!0))}};var ee=me,Ye=ee,Ot=D;function E(e){Ye.call(this,e)}E.prototype=new Ye,E.prototype.constructor=E,E.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-a,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-a,t+1))return[e,t]}else if(s!==0){if(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(e+a,t+s,e,t)},E.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,p;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0?(r.isWalkableAt(n,i-1)&&f.push([n,i-1]),r.isWalkableAt(n,i+1)&&f.push([n,i+1]),r.isWalkableAt(n+u,i)&&f.push([n+u,i])):h!==0&&(r.isWalkableAt(n-1,i)&&f.push([n-1,i]),r.isWalkableAt(n+1,i)&&f.push([n+1,i]),r.isWalkableAt(n,i+h)&&f.push([n,i+h]));else for(c=r.getNeighbors(e,Ot.Never),v=0,p=c.length;v<p;++v)b=c[v],f.push([b.x,b.y]);return f};var Ct=E,Xe=ee,It=D;function x(e){Xe.call(this,e)}x.prototype=new Xe,x.prototype.constructor=x,x.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(r.isWalkableAt(e-a,t+s)&&!r.isWalkableAt(e-a,t)||r.isWalkableAt(e+a,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e+a,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+a,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return this._jump(e+a,t+s,e,t)},x.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,p;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n+u,i+h)&&f.push([n+u,i+h]),r.isWalkableAt(n-u,i)||f.push([n-u,i+h]),r.isWalkableAt(n,i-h)||f.push([n+u,i-h])):u===0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+1,i)||f.push([n+1,i+h]),r.isWalkableAt(n-1,i)||f.push([n-1,i+h])):(r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n,i+1)||f.push([n+u,i+1]),r.isWalkableAt(n,i-1)||f.push([n+u,i-1]));else for(c=r.getNeighbors(e,It.Always),v=0,p=c.length;v<p;++v)b=c[v],f.push([b.x,b.y]);return f};var Et=x,Ge=ee,xt=D;function R(e){Ge.call(this,e)}R.prototype=new Ge,R.prototype.constructor=R,R.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-a,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-a,t+1))return[e,t]}else if(s!==0&&(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s)))return[e,t];return r.isWalkableAt(e+a,t)&&r.isWalkableAt(e,t+s)?this._jump(e+a,t+s,e,t):null},R.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,p;if(t)if(a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0)r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n,i+h)&&r.isWalkableAt(n+u,i)&&f.push([n+u,i+h]);else{var w;if(u!==0){w=r.isWalkableAt(n+u,i);var g=r.isWalkableAt(n,i+1),o=r.isWalkableAt(n,i-1);w&&(f.push([n+u,i]),g&&f.push([n+u,i+1]),o&&f.push([n+u,i-1])),g&&f.push([n,i+1]),o&&f.push([n,i-1])}else if(h!==0){w=r.isWalkableAt(n,i+h);var l=r.isWalkableAt(n+1,i),d=r.isWalkableAt(n-1,i);w&&(f.push([n,i+h]),l&&f.push([n+1,i+h]),d&&f.push([n-1,i+h])),l&&f.push([n+1,i]),d&&f.push([n-1,i])}}else for(c=r.getNeighbors(e,xt.OnlyWhenNoObstacles),v=0,p=c.length;v<p;++v)b=c[v],f.push([b.x,b.y]);return f};var Rt=R,Te=ee,jt=D;function j(e){Te.call(this,e)}j.prototype=new Te,j.prototype.constructor=j,j.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(r.isWalkableAt(e-a,t+s)&&!r.isWalkableAt(e-a,t)||r.isWalkableAt(e+a,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e+a,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+a,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return r.isWalkableAt(e+a,t)||r.isWalkableAt(e,t+s)?this._jump(e+a,t+s,e,t):null},j.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,p;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),(r.isWalkableAt(n,i+h)||r.isWalkableAt(n+u,i))&&f.push([n+u,i+h]),!r.isWalkableAt(n-u,i)&&r.isWalkableAt(n,i+h)&&f.push([n-u,i+h]),!r.isWalkableAt(n,i-h)&&r.isWalkableAt(n+u,i)&&f.push([n+u,i-h])):u===0?r.isWalkableAt(n,i+h)&&(f.push([n,i+h]),r.isWalkableAt(n+1,i)||f.push([n+1,i+h]),r.isWalkableAt(n-1,i)||f.push([n-1,i+h])):r.isWalkableAt(n+u,i)&&(f.push([n+u,i]),r.isWalkableAt(n,i+1)||f.push([n+u,i+1]),r.isWalkableAt(n,i-1)||f.push([n+u,i-1]));else for(c=r.getNeighbors(e,jt.IfAtMostOneObstacle),v=0,p=c.length;v<p;++v)b=c[v],f.push([b.x,b.y]);return f};var Jt=j,Ae=D,Lt=Ct,Ht=Et,Yt=Rt,Xt=Jt;function Gt(e){return e=e||{},e.diagonalMovement===Ae.Never?new Lt(e):e.diagonalMovement===Ae.Always?new Ht(e):e.diagonalMovement===Ae.OnlyWhenNoObstacles?new Yt(e):new Xt(e)}var Tt=Gt,Vt={Heap:G,Node:le,Grid:bt,Util:$,DiagonalMovement:D,Heuristic:H,AStarFinder:ce,BestFirstFinder:Nt,BreadthFirstFinder:Bt,DijkstraFinder:Ft,BiAStarFinder:pe,BiBestFirstFinder:Pt,BiBreadthFirstFinder:$t,BiDijkstraFinder:Dt,IDAStarFinder:St,JumpPointFinder:Tt},te=Vt;function Me(e,t){switch(t){case"top":return{x:e.x,y:e.y-1};case"bottom":return{x:e.x,y:e.y+1};case"left":return{x:e.x-1,y:e.y};case"right":return{x:e.x+1,y:e.y}}}function Ve(e,t,n){let i=e.getNodeAt(t.x,t.y);for(;!i.walkable;){e.setWalkableAt(i.x,i.y,!0);const r=Me(i,n);i=e.getNodeAt(r.x,r.y)}}const B=10;function ie(e,t,n){let i=e.x/B,r=e.y/B,a=t/B,s=n/B;if(a<1)for(;a!==1;)a++,i++;else if(a>1)for(;a!==1;)a--,i--;if(s<1)for(;s!==1;)s++,r++;else if(s>1)for(;s!==1;)s--,r--;return{x:i,y:r}}function zt(e,t,n){let i=e.x*B,r=e.y*B,a=t,s=n;if(a<B)for(;a!==B;)a=a+B,i=i-B;else if(a>B)for(;a!==B;)a=a-B,i=i+B;if(s<B)for(;s!==B;)s=s+B,r=r-B;else if(s>B)for(;s!==B;)s=s-B,r=r+B;return{x:i,y:r}}function ne(e,t=10){return Math.round(e/t)*t}function re(e,t=10){return Math.floor(e/t)*t}function ae(e,t=10){return Math.ceil(e/t)*t}const O=10;function Ut(e,t,n,i){const{xMin:r,yMin:a,width:s,height:u}=e,h=s/O,f=u/O,c=new te.Grid(h,f);t.forEach(l=>{const d=ie(l.topLeft,r,a),m=ie(l.bottomRight,r,a);for(let y=d.x;y<m.x;y++)for(let A=d.y;A<m.y;A++)c.setWalkableAt(y,A,!1)});const b=ie({x:ne(n.x,O),y:ne(n.y,O)},r,a),v=ie({x:ne(i.x,O),y:ne(i.y,O)},r,a),p=c.getNodeAt(b.x,b.y);Ve(c,p,n.position);const w=c.getNodeAt(v.x,v.y);Ve(c,w,i.position);const g=Me(p,n.position),o=Me(w,i.position);return{grid:c,start:g,end:o}}function Qt(e,t,n,i){const r=(e-n)/2+n,a=(t-i)/2+i;return[r,a]}function qt(e){let i=e[0];const r=e[0];let a=`M${r[0]},${r[1]}M`;for(let u=0;u<e.length;u++){const h=e[u],f=Qt(i[0],i[1],h[0],h[1]);a+=` ${f[0]},${f[1]}`,a+=`Q${h[0]},${h[1]}`,i=h}const s=e[e.length-1];return a+=` ${s[0]},${s[1]}`,a}function Zt(e,t,n){const i=[[e.x,e.y],...n,[t.x,t.y]];return qt(i)}function Kt(e,t,n){const i=new te.AStarFinder({diagonalMovement:te.DiagonalMovement.Always,allowDiagonal:!0,dontCrossCorners:!0});let r=[];try{r=i.findPath(t.x,t.y,n.x,n.y,e),r=te.Util.smoothenPath(e,r)}catch{}return r}function ei(e,t=0,n=0,i=0){t=Math.max(Math.round(t),0),n=Math.max(Math.round(n),0),i=Math.max(Math.round(i),0),t=Number.isInteger(t)?t:0,n=Number.isInteger(n)?n:0,i=Number.isInteger(i)?i:0;let r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER;const h=e.map(o=>{const{computedPosition:{x:l,y:d},dimensions:m}=o,y=Math.max(m.width||0,1),A=Math.max(m.height||0,1),M={x:l||0,y:d||0},N={x:M.x-t,y:M.y-t},W={x:M.x-t,y:M.y+A+t},F={x:M.x+y+t,y:M.y-t},P={x:M.x+y+t,y:M.y+A+t};return i>0&&(N.x=re(N.x,i),N.y=re(N.y,i),W.x=re(W.x,i),W.y=ae(W.y,i),F.x=ae(F.x,i),F.y=re(F.y,i),P.x=ae(P.x,i),P.y=ae(P.y,i)),N.y<u&&(u=N.y),N.x<s&&(s=N.x),P.y>a&&(a=P.y),P.x>r&&(r=P.x),{id:o.id,width:y,height:A,topLeft:N,bottomLeft:W,topRight:F,bottomRight:P}});r=r+n,a=a+n,s=s-n,u=u-n;const f={x:s,y:u},c={x:s,y:a},b={x:r,y:u},v={x:r,y:a},p=Math.abs(f.x-b.x),w=Math.abs(f.y-c.y);return{nodes:h,graph:{topLeft:f,bottomLeft:c,topRight:b,bottomRight:v,width:p,height:w,xMax:r,yMax:a,xMin:s,yMin:u}}}const ti=["d","marker-end","marker-start"],ii={name:"PathFindingEdge",compatConfig:{MODE:3},inheritAttrs:!1},ni=k.defineComponent({...ii,props:{id:null,source:null,target:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},animated:{type:Boolean},sourcePosition:{default:_.Position.Bottom},targetPosition:{default:_.Position.Top},label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,style:null,markerEnd:null,markerStart:null,sourceHandleId:null,targetHandleId:null},setup(e){const t=e,n=10,i=20,r=O,{getNodes:a}=_.useVueFlow(),s=k.computed(()=>_.getSimpleBezierPath({...t})),u=k.computed(()=>({x:t.sourceX,y:t.sourceY,position:t.sourcePosition})),h=k.computed(()=>({x:t.targetX,y:t.targetY,position:t.targetPosition})),f=k.computed(()=>ei(a.value,n,i,r)),c=k.computed(()=>{let p=[];if(h.value.x&&u.value.x&&a.value.length){const{grid:w,start:g,end:o}=Ut(f.value.graph,f.value.nodes,u.value,h.value);p=Kt(w,g,o)}return p}),b=k.computed(()=>{var w;let p="";if((w=c.value)!=null&&w.length){const g=c.value.map(o=>{const[l,d]=o,m=zt({x:l,y:d},f.value.graph.xMin,f.value.graph.yMin);return[m.x,m.y]});p=Zt(u.value,h.value,g)}return p}),v=k.useAttrs();return(p,w)=>k.unref(c)&&k.unref(c).length<=2?(k.openBlock(),k.createBlock(k.unref(_.BezierEdge),k.normalizeProps(k.mergeProps({key:0},{...t,...k.unref(v)})),null,16)):(k.openBlock(),k.createElementBlock(k.Fragment,{key:1},[k.createElementVNode("path",{style:k.normalizeStyle({...e.style,...k.unref(v).style}),class:"vue-flow__edge-path",d:k.unref(b),"marker-end":e.markerEnd,"marker-start":e.markerStart},null,12,ti),e.label?(k.openBlock(),k.createBlock(k.unref(_.EdgeText),{key:0,x:k.unref(s)[1],y:k.unref(s)[2],label:e.label,"label-style":e.labelStyle,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius},null,8,["x","y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius"])):k.createCommentVNode("",!0)],64))}});var ri=Math.PI;function ai(e,t,n,i){i===void 0&&(i=!1);var r=t[0],a=t[1],s=n[0],u=n[1],h=s+(e-r)/(a-r)*(u-s);if(i===!0)if(s<u){if(h<s)return s;if(h>u)return u}else{if(h>s)return s;if(h<u)return u}return h}function ze(e,t,n,i,r){var a=Math.sin(r),s=Math.cos(r),u=e-n,h=t-i,f=u*s-h*a,c=u*a+h*s;return[f+n,c+i]}function si(e,t,n,i){return Math.hypot(i-t,n-e)}function Y(e,t,n,i){return Math.atan2(i-t,n-e)}function se(e,t,n,i){return[Math.cos(n)*i+e,Math.sin(n)*i+t]}function J(e,t,n,i,r){return r===void 0&&(r=.5),[e+(n-e)*r,t+(i-t)*r]}function oi(e,t){return t===void 0&&(t=8),Math.floor(t*(.5+e/(ri*2)%t))}function li(e,t,n,i){return Math.abs((n-e)/2/((i-t)/2))}function ui(e,t,n,i,r){r===void 0&&(r={});var a=r,s=a.bow,u=s===void 0?0:s,h=a.stretch,f=h===void 0?.5:h,c=a.stretchMin,b=c===void 0?0:c,v=a.stretchMax,p=v===void 0?420:v,w=a.padStart,g=w===void 0?0:w,o=a.padEnd,l=o===void 0?0:o,d=a.flip,m=d===void 0?!1:d,y=a.straights,A=y===void 0?!0:y,M=Y(e,t,n,i),N=si(e,t,n,i),W=li(e,t,n,i);if(N<(g+l)*2||u===0&&f===0||A&&[0,1,1/0].includes(W)){var F=Math.max(0,Math.min(N-g,g)),P=Math.max(0,Math.min(N-F,l)),L=se(e,t,M,F),Ue=L[0],Qe=L[1],qe=se(n,i,M+Math.PI,P),Ze=qe[0],Ke=qe[1],et=J(Ue,Qe,Ze,Ke,.5),di=et[0],gi=et[1];return[Ue,Qe,di,gi,Ze,Ke,M,M,M]}var tt=(oi(M)%2===0?1:-1)*(m?-1:1),it=u+ai(N,[b,p],[1,0],!0)*f,nt=J(e,t,n,i,.5),pi=nt[0],bi=nt[1],rt=J(e,t,n,i,.5-it),C=rt[0],I=rt[1],at=ze(C,I,pi,bi,Math.PI/2*tt);C=at[0],I=at[1];var vi=Y(e,t,C,I),st=se(e,t,vi,g),ke=st[0],ye=st[1],mi=Y(n,i,C,I),ot=se(n,i,mi,l),we=ot[0],Ne=ot[1],Ai=Y(C,I,e,t),Mi=Y(C,I,n,i),lt=J(ke,ye,we,Ne,.5),ki=lt[0],yi=lt[1],ut=J(ke,ye,we,Ne,.5-it),We=ut[0],Be=ut[1],ht=ze(We,Be,ki,yi,Math.PI/2*tt);We=ht[0],Be=ht[1];var ft=J(C,I,We,Be,.5),wi=ft[0],Ni=ft[1];return[ke,ye,wi,Ni,we,Ne,Mi,Ai,M]}const hi=["d","marker-end","marker-start"],fi={name:"PerfectArrow",compatConfig:{MODE:3},inheritAttrs:!1},ci=k.defineComponent({...fi,props:{id:null,source:null,target:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean},animated:{type:Boolean},sourcePosition:null,targetPosition:null,label:null,labelStyle:null,labelShowBg:{type:Boolean},labelBgStyle:null,labelBgPadding:null,labelBgBorderRadius:null,style:null,markerEnd:null,markerStart:null,sourceHandleId:null,targetHandleId:null,options:{default:()=>({padStart:3,padEnd:3,stretch:.2})}},setup(e){const t=e,n=k.computed(()=>_.getSimpleBezierPath({...t})),i=k.computed(()=>ui(t.sourceX,t.sourceY,t.targetX,t.targetY,{...t.options})),r=k.useAttrs();return(a,s)=>(k.openBlock(),k.createElementBlock(k.Fragment,null,[k.createElementVNode("path",{style:k.normalizeStyle({...e.style,...k.unref(r).style}),class:"vue-flow__edge-path vue-flow__perfect-arrow",d:`M${k.unref(i)[0]},${k.unref(i)[1]} Q${k.unref(i)[2]},${k.unref(i)[3]} ${k.unref(i)[4]},${k.unref(i)[5]}`,"marker-end":e.markerEnd,"marker-start":e.markerStart},null,12,hi),e.label?(k.openBlock(),k.createBlock(k.unref(_.EdgeText),{key:0,x:k.unref(n)[1],y:k.unref(n)[2],label:e.label,"label-style":e.labelStyle,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius},null,8,["x","y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius"])):k.createCommentVNode("",!0)],64))}});return X.PathFindingEdge=ni,X.PerfectArrow=ci,Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),X}({},Vue,VueFlowCore);
